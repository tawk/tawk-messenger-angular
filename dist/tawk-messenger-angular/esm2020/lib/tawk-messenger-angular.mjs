import { Inject, Injectable, PLATFORM_ID, Optional } from "@angular/core";
import { DOCUMENT, isPlatformBrowser } from '@angular/common';
import * as i0 from "@angular/core";
export class TawkMessengerAngular {
    constructor(rendererFactory, platformId, document) {
        this.rendererFactory = rendererFactory;
        this.platformId = platformId;
        this.document = document;
        this.renderer = this.rendererFactory.createRenderer(null, null);
    }
    init(data) {
        if (!isPlatformBrowser(this.platformId)) {
            return;
        }
        window.Tawk_API = window.Tawk_API || {};
        window.Tawk_LoadStart = new Date();
        this.loadScript(data);
    }
    loadScript({ basePath = 'tawk.to', propertyId = '', widgetId = '', embedId = '' }) {
        if (!isPlatformBrowser(this.platformId)) {
            return;
        }
        if (embedId && embedId.length) {
            /**
             * If the element with embedId as id we will create a new clement
             */
            if (!document.getElementById(embedId)) {
                const element = this.renderer.createElement('div');
                this.renderer.setProperty(element, 'id', embedId);
                // Append the created div to the body element
                this.renderer.appendChild(document.body, element);
            }
            window.Tawk_API.embedded = embedId;
        }
        const s1 = this.renderer.createElement('script');
        s1.type = 'text/javascript';
        s1.async = true;
        s1.src = `https://embed.${basePath}/${propertyId}/${widgetId}`;
        s1.charset = 'UTF-8';
        s1.setAttribute('crossorigin', '*');
        this.renderer.appendChild(this.document.head, s1);
    }
    hideWidget() {
        window.Tawk_API.hideWidget();
    }
    showWidget() {
        window.Tawk_API.showWidget();
    }
    maximize() {
        window.Tawk_API.maximize();
    }
    minimize() {
        window.Tawk_API.minimize();
    }
    toggle() {
        window.Tawk_API.toggle();
    }
    popup() {
        window.Tawk_API.popup();
    }
    toggleVisibility() {
        window.Tawk_API.toggleVisibility();
    }
    endChat() {
        window.Tawk_API.endChat();
    }
    getWindowType() {
        return window.Tawk_API.getWindowType();
    }
    getStatus() {
        return window.Tawk_API.getStatus();
    }
    isChatMaximized() {
        return window.Tawk_API.isChatMaximized();
    }
    isChatMinimized() {
        return window.Tawk_API.isChatMinimized();
    }
    isChatHidden() {
        return window.Tawk_API.isChatHidden();
    }
    isChatOngoing() {
        return window.Tawk_API.isChatOngoing();
    }
    isVisitorEngaged() {
        return window.Tawk_API.isVisitorEngaged();
    }
    onLoaded() {
        return window.Tawk_API.onLoaded();
    }
    onBeforeLoaded() {
        return window.Tawk_API.onBeforeLoaded();
    }
    widgetPosition() {
        return window.Tawk_API.widgetPosition();
    }
    visitor(data) {
        return window.Tawk_API.visitor = data;
    }
    setAttributes(attribute, callback) {
        window.Tawk_API.setAttributes(attribute, callback);
    }
    addEvent(event, metadata, callback) {
        window.Tawk_API.setAttributes(event, metadata, callback);
    }
    addTags(tags, callback) {
        window.Tawk_API.addTags(tags, callback);
    }
    removeTags(tags, callback) {
        window.Tawk_API.removeTags(tags, callback);
    }
    switchWidget(data, callback) {
        window.Tawk_API.switchWidget(data, callback);
    }
    customStyle(customStyle) {
        if (customStyle) {
            return window.Tawk_API.customStyle = customStyle;
        }
        return;
    }
    onLoad(callback) {
        window.addEventListener('tawkLoad', () => {
            callback();
        });
    }
    onStatusChange(callback) {
        window.addEventListener('tawkStatusChange', (status) => {
            callback(status.detail);
        });
    }
    onBeforeLoad(callback) {
        window.addEventListener('tawkBeforeLoad', () => {
            callback();
        });
    }
    onChatMaximized(callback) {
        window.addEventListener('tawkChatMaximized', () => {
            callback();
        });
    }
    onChatMinimized(callback) {
        window.addEventListener('tawkChatMinimized', () => {
            callback();
        });
    }
    onChatHidden(callback) {
        window.addEventListener('tawkChatHidden', () => {
            callback();
        });
    }
    onChatStarted(callback) {
        window.addEventListener('tawkChatStarted', () => {
            callback();
        });
    }
    onChatEnded(callback) {
        window.addEventListener('tawkChatEnded', () => {
            callback();
        });
    }
    onPrechatSubmit(callback) {
        window.addEventListener('tawkPrechatSubmit', (data) => {
            callback(data.detail);
        });
    }
    onOfflineSubmit(callback) {
        window.addEventListener('tawkOfflineSubmit', (data) => {
            callback(data.detail);
        });
    }
    onChatMessageVisitor(callback) {
        window.addEventListener('tawkChatMessageVisitor', (message) => {
            callback(message.detail);
        });
    }
    onChatMessageAgent(callback) {
        window.addEventListener('tawkChatMessageAgent', (message) => {
            callback(message.detail);
        });
    }
    onChatMessageSystem(callback) {
        window.addEventListener('tawkChatMessageSystem', (message) => {
            callback(message.detail);
        });
    }
    onAgentJoinChat(callback) {
        window.addEventListener('tawkAgentJoinChat', (data) => {
            callback(data.detail);
        });
    }
    onAgentLeaveChat(callback) {
        window.addEventListener('tawkAgentLeaveChat', (data) => {
            callback(data.detail);
        });
    }
    onChatSatisfaction(callback) {
        window.addEventListener('tawkChatSatisfaction', (satisfaction) => {
            callback(satisfaction.detail);
        });
    }
    onVisitorNameChanged(callback) {
        window.addEventListener('tawkVisitorNameChanged', (visitorName) => {
            callback(visitorName.detail);
        });
    }
    onFileUpload(callback) {
        window.addEventListener('tawkFileUpload', (link) => {
            callback(link.detail);
        });
    }
    onTagsUpdated(callback) {
        window.addEventListener('tawkTagsUpdated', (data) => {
            callback(data.detail);
        });
    }
    onUnreadCountChanged(callback) {
        window.addEventListener('tawkUnreadCountChanged', (data) => {
            callback(data.detail);
        });
    }
}
TawkMessengerAngular.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: TawkMessengerAngular, deps: [{ token: i0.RendererFactory2 }, { token: PLATFORM_ID }, { token: DOCUMENT, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });
TawkMessengerAngular.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: TawkMessengerAngular, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: TawkMessengerAngular, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return [{ type: i0.RendererFactory2 }, { type: Object, decorators: [{
                    type: Inject,
                    args: [PLATFORM_ID]
                }] }, { type: undefined, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [DOCUMENT]
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGF3ay1tZXNzZW5nZXItYW5ndWxhci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL3Rhd2stbWVzc2VuZ2VyLWFuZ3VsYXIvc3JjL2xpYi90YXdrLW1lc3Nlbmdlci1hbmd1bGFyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQW1FLE1BQU0sZUFBZSxDQUFDO0FBQzNJLE9BQU8sRUFBRSxRQUFRLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQzs7QUFLOUQsTUFBTSxPQUFPLG9CQUFvQjtJQUdoQyxZQUNTLGVBQWlDLEVBQ1YsVUFBa0IsRUFDWCxRQUFhO1FBRjNDLG9CQUFlLEdBQWYsZUFBZSxDQUFrQjtRQUNWLGVBQVUsR0FBVixVQUFVLENBQVE7UUFDWCxhQUFRLEdBQVIsUUFBUSxDQUFLO1FBRW5ELElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ2pFLENBQUM7SUFFTSxJQUFJLENBQUMsSUFBVTtRQUNyQixJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQ3hDLE9BQU87U0FDUDtRQUVLLE1BQU8sQ0FBQyxRQUFRLEdBQVMsTUFBTyxDQUFDLFFBQVEsSUFBSSxFQUFFLENBQUM7UUFDaEQsTUFBTyxDQUFDLGNBQWMsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBRTFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdkIsQ0FBQztJQUVPLFVBQVUsQ0FBQyxFQUFFLFFBQVEsR0FBRyxTQUFTLEVBQUUsVUFBVSxHQUFHLEVBQUUsRUFBRSxRQUFRLEdBQUcsRUFBRSxFQUFFLE9BQU8sR0FBRyxFQUFFLEVBQUU7UUFDeEYsSUFBSSxDQUFDLGlCQUFp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O0lBRU0sb0JBQW9CLENBQUMsUUFBYztRQUN6QyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsd0JBQXdCLEVBQUUsQ0FBQyxJQUFVLEVBQUUsRUFBRTtZQUNoRSxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3ZCLENBQUMsQ0FBQyxDQUFDO0lBQ0osQ0FBQzs7aUhBbFJXLG9CQUFvQixrREFLdkIsV0FBVyxhQUNDLFFBQVE7cUhBTmpCLG9CQUFvQixjQUZuQixNQUFNOzJGQUVQLG9CQUFvQjtrQkFIaEMsVUFBVTttQkFBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkI7eUZBTTRDLE1BQU07MEJBQWhELE1BQU07MkJBQUMsV0FBVzs7MEJBQ2xCLFFBQVE7OzBCQUFJLE1BQU07MkJBQUMsUUFBUSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgUExBVEZPUk1fSUQsIE9wdGlvbmFsLCBSZW5kZXJlcjIsIFJlbmRlcmVyRmFjdG9yeTIsIE91dHB1dCwgSG9zdExpc3RlbmVyLCBFdmVudEVtaXR0ZXIgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgRE9DVU1FTlQsIGlzUGxhdGZvcm1Ccm93c2VyIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgVGF3a01lc3NlbmdlckFuZ3VsYXIge1xuXHRwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjJcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIHJlbmRlcmVyRmFjdG9yeTogUmVuZGVyZXJGYWN0b3J5Mixcblx0XHRASW5qZWN0KFBMQVRGT1JNX0lEKSBwcm90ZWN0ZWQgcGxhdGZvcm1JZDogT2JqZWN0LFxuXHRcdEBPcHRpb25hbCgpIEBJbmplY3QoRE9DVU1FTlQpIHByaXZhdGUgZG9jdW1lbnQ6IGFueVxuXHQpIHtcblx0XHR0aGlzLnJlbmRlcmVyID0gdGhpcy5yZW5kZXJlckZhY3RvcnkuY3JlYXRlUmVuZGVyZXIobnVsbCwgbnVsbCk7XG5cdH1cblxuXHRwdWJsaWMgaW5pdChkYXRhIDogYW55KSA6IHZvaWQge1xuXHRcdGlmICghaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5wbGF0Zm9ybUlkKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdCg8YW55PndpbmRvdykuVGF3a19BUEkgPSAoPGFueT53aW5kb3cpLlRhd2tfQVBJIHx8IHt9O1xuXHRcdCg8YW55PndpbmRvdykuVGF3a19Mb2FkU3RhcnQgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0dGhpcy5sb2FkU2NyaXB0KGRhdGEpO1xuXHR9XG5cblx0cHJpdmF0ZSBsb2FkU2NyaXB0KHsgYmFzZVBhdGggPSAndGF3ay50bycsIHByb3BlcnR5SWQgPSAnJywgd2lkZ2V0SWQgPSAnJywgZW1iZWRJZCA9ICcnIH0pOiB2b2lkIHtcblx0XHRpZiAoIWlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm1JZCkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoZW1iZWRJZCAmJiBlbWJlZElkLmxlbmd0aCkge1xuXHRcdFx0LyoqXG5cdFx0XHQgKiBJZiB0aGUgZWxlbWVudCB3aXRoIGVtYmVkSWQgYXMgaWQgd2Ugd2lsbCBjcmVhdGUgYSBuZXcgY2xlbWVudFxuXHRcdFx0ICovXG5cdFx0XHRpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVtYmVkSWQpKSB7XG5cdFx0XHRcdGNvbnN0IGVsZW1lbnQgPSB0aGlzLnJlbmRlcmVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG5cdFx0XHRcdHRoaXMucmVuZGVyZXIuc2V0UHJvcGVydHkoZWxlbWVudCwgJ2lkJywgZW1iZWRJZCk7XG5cblx0XHRcdFx0Ly8gQXBwZW5kIHRoZSBjcmVhdGVkIGRpdiB0byB0aGUgYm9keSBlbGVtZW50XG5cdFx0XHRcdHRoaXMucmVuZGVyZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuYm9keSwgZWxlbWVudCk7XG5cdFx0XHR9XG5cblx0XHRcdCg8YW55PndpbmRvdykuVGF3a19BUEkuZW1iZWRkZWQgPSBlbWJlZElkO1xuXHRcdH1cblxuXHRcdGNvbnN0IHMxID0gdGhpcy5yZW5kZXJlci5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblx0XHRzMS50eXBlID0gJ3RleHQvamF2YXNjcmlwdCdcblx0XHRzMS5hc3luYyA9IHRydWU7XG5cdFx0czEuc3JjID0gYGh0dHBzOi8vZW1iZWQuJHtiYXNlUGF0aH0vJHtwcm9wZXJ0eUlkfS8ke3dpZGdldElkfWA7XG5cdFx0czEuY2hhcnNldCA9ICdVVEYtOCc7XG5cdFx0czEuc2V0QXR0cmlidXRlKCdjcm9zc29yaWdpbicsICcqJyk7XG5cdFx0dGhpcy5yZW5kZXJlci5hcHBlbmRDaGlsZCh0aGlzLmRvY3VtZW50LmhlYWQsIHMxKTtcblx0fVxuXG5cdHB1YmxpYyBoaWRlV2lkZ2V0KCk6IHZvaWQge1xuXHRcdCg8YW55PndpbmRvdykuVGF3a19BUEkuaGlkZVdpZGdldCgpO1xuXHR9XG5cblx0cHVibGljIHNob3dXaWRnZXQoKTogdm9pZCB7XG5cdFx0KDxhbnk+d2luZG93KS5UYXdrX0FQSS5zaG93V2lkZ2V0KCk7XG5cdH1cblxuXHRwdWJsaWMgbWF4aW1pemUoKTogdm9pZCB7XG5cdFx0KDxhbnk+d2luZG93KS5UYXdrX0FQSS5tYXhpbWl6ZSgpO1xuXHR9XG5cblx0cHVibGljIG1pbmltaXplKCk6IHZvaWQge1xuXHRcdCg8YW55PndpbmRvdykuVGF3a19BUEkubWluaW1pemUoKTtcblx0fVxuXG5cdHB1YmxpYyB0b2dnbGUoKTogdm9pZCB7XG5cdFx0KDxhbnk+d2luZG93KS5UYXdrX0FQSS50b2dnbGUoKTtcblx0fVxuXG5cdHB1YmxpYyBwb3B1cCgpOiB2b2lkIHtcblx0XHQoPGFueT53aW5kb3cpLlRhd2tfQVBJLnBvcHVwKCk7XG5cdH1cblxuXHRwdWJsaWMgdG9nZ2xlVmlzaWJpbGl0eSgpOiB2b2lkIHtcblx0XHQoPGFueT53aW5kb3cpLlRhd2tfQVBJLnRvZ2dsZVZpc2liaWxpdHkoKTtcblx0fVxuXG5cdHB1YmxpYyBlbmRDaGF0KCk6IHZvaWQge1xuXHRcdCg8YW55PndpbmRvdykuVGF3a19BUEkuZW5kQ2hhdCgpO1xuXHR9XG5cblx0cHVibGljIGdldFdpbmRvd1R5cGUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gKDxhbnk+d2luZG93KS5UYXdrX0FQSS5nZXRXaW5kb3dUeXBlKCk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0U3RhdHVzKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuICg8YW55PndpbmRvdykuVGF3a19BUEkuZ2V0U3RhdHVzKCk7XG5cdH1cblxuXHRwdWJsaWMgaXNDaGF0TWF4aW1pemVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAoPGFueT53aW5kb3cpLlRhd2tfQVBJLmlzQ2hhdE1heGltaXplZCgpO1xuXHR9XG5cblx0cHVibGljIGlzQ2hhdE1pbmltaXplZCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKDxhbnk+d2luZG93KS5UYXdrX0FQSS5pc0NoYXRNaW5pbWl6ZWQoKTtcblx0fVxuXG5cdHB1YmxpYyBpc0NoYXRIaWRkZW4oKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuICg8YW55PndpbmRvdykuVGF3a19BUEkuaXNDaGF0SGlkZGVuKCk7XG5cdH1cblxuXHRwdWJsaWMgaXNDaGF0T25nb2luZygpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKDxhbnk+d2luZG93KS5UYXdrX0FQSS5pc0NoYXRPbmdvaW5nKCk7XG5cdH1cblxuXHRwdWJsaWMgaXNWaXNpdG9yRW5nYWdlZCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKDxhbnk+d2luZG93KS5UYXdrX0FQSS5pc1Zpc2l0b3JFbmdhZ2VkKCk7XG5cdH1cblxuXHRwdWJsaWMgb25Mb2FkZWQoKTogdm9pZCB7XG5cdFx0cmV0dXJuICg8YW55PndpbmRvdykuVGF3a19BUEkub25Mb2FkZWQoKTtcblx0fVxuXG5cdHB1YmxpYyBvbkJlZm9yZUxvYWRlZCgpOiB2b2lkIHtcblx0XHRyZXR1cm4gKDxhbnk+d2luZG93KS5UYXdrX0FQSS5vbkJlZm9yZUxvYWRlZCgpO1xuXHR9XG5cblx0cHVibGljIHdpZGdldFBvc2l0aW9uKCk6IHZvaWQge1xuXHRcdHJldHVybiAoPGFueT53aW5kb3cpLlRhd2tfQVBJLndpZGdldFBvc2l0aW9uKCk7XG5cdH1cblxuXHRwdWJsaWMgdmlzaXRvcihkYXRhOiBhbnkpIHtcblx0XHRyZXR1cm4gKDxhbnk+d2luZG93KS5UYXdrX0FQSS52aXNpdG9yID0gZGF0YTtcblx0fVxuXG5cdHB1YmxpYyBzZXRBdHRyaWJ1dGVzKGF0dHJpYnV0ZTogb2JqZWN0LCBjYWxsYmFjazogKGVycm9yPzogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZCkge1xuXHRcdCg8YW55PndpbmRvdykuVGF3a19BUEkuc2V0QXR0cmlidXRlcyhhdHRyaWJ1dGUsIGNhbGxiYWNrKTtcblx0fVxuXG5cdHB1YmxpYyBhZGRFdmVudChldmVudDogc3RyaW5nW10sIG1ldGFkYXRhOiBhbnksIGNhbGxiYWNrOiAoZXJyb3I/OiBhbnkgfCBudWxsKSA9PiB2b2lkKSB7XG5cdFx0KDxhbnk+d2luZG93KS5UYXdrX0FQSS5zZXRBdHRyaWJ1dGVzKGV2ZW50LCBtZXRhZGF0YSwgY2FsbGJhY2spO1xuXHR9XG5cblx0cHVibGljIGFkZFRhZ3ModGFnczogc3RyaW5nW10sIGNhbGxiYWNrOiAoZXJyb3I/OiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkKSB7XG5cdFx0KDxhbnk+d2luZG93KS5UYXdrX0FQSS5hZGRUYWdzKHRhZ3MsIGNhbGxiYWNrKTtcblx0fVxuXG5cdHB1YmxpYyByZW1vdmVUYWdzKHRhZ3M6IHN0cmluZ1tdLCBjYWxsYmFjazogKGVycm9yPzogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZCkge1xuXHRcdCg8YW55PndpbmRvdykuVGF3a19BUEkucmVtb3ZlVGFncyh0YWdzLCBjYWxsYmFjayk7XG5cdH1cblxuXHRwdWJsaWMgc3dpdGNoV2lkZ2V0KGRhdGE6IG9iamVjdCwgY2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcblx0XHQoPGFueT53aW5kb3cpLlRhd2tfQVBJLnN3aXRjaFdpZGdldChkYXRhLCBjYWxsYmFjayk7XG5cdH1cblxuXHRwdWJsaWMgY3VzdG9tU3R5bGUoY3VzdG9tU3R5bGU/OiBvYmplY3QgfCB1bmRlZmluZWQpIHtcblx0XHRpZiAoY3VzdG9tU3R5bGUpIHtcblx0XHRcdHJldHVybiAoPGFueT53aW5kb3cpLlRhd2tfQVBJLmN1c3RvbVN0eWxlID0gY3VzdG9tU3R5bGU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0cHVibGljIG9uTG9hZChjYWxsYmFjaz86IGFueSk6IHZvaWQge1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0YXdrTG9hZCcsICgpID0+IHtcblx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgb25TdGF0dXNDaGFuZ2UoY2FsbGJhY2s/OiBhbnkpOiB2b2lkIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGF3a1N0YXR1c0NoYW5nZScsIChzdGF0dXM/OiBhbnkpID0+IHtcblx0XHRcdGNhbGxiYWNrKHN0YXR1cy5kZXRhaWwpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIG9uQmVmb3JlTG9hZChjYWxsYmFjaz86IGFueSk6IHZvaWQge1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0YXdrQmVmb3JlTG9hZCcsICgpID0+IHtcblx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgb25DaGF0TWF4aW1pemVkKGNhbGxiYWNrPzogYW55KTogdm9pZCB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rhd2tDaGF0TWF4aW1pemVkJywgKCkgPT4ge1xuXHRcdFx0Y2FsbGJhY2soKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBvbkNoYXRNaW5pbWl6ZWQoY2FsbGJhY2s/OiBhbnkpOiB2b2lkIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGF3a0NoYXRNaW5pbWl6ZWQnLCAoKSA9PiB7XG5cdFx0XHRjYWxsYmFjaygpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIG9uQ2hhdEhpZGRlbihjYWxsYmFjaz86IGFueSk6IHZvaWQge1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0YXdrQ2hhdEhpZGRlbicsICgpID0+IHtcblx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgb25DaGF0U3RhcnRlZChjYWxsYmFjaz86IGFueSk6IHZvaWQge1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0YXdrQ2hhdFN0YXJ0ZWQnLCAoKSA9PiB7XG5cdFx0XHRjYWxsYmFjaygpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIG9uQ2hhdEVuZGVkKGNhbGxiYWNrPzogYW55KTogdm9pZCB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rhd2tDaGF0RW5kZWQnLCAoKSA9PiB7XG5cdFx0XHRjYWxsYmFjaygpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIG9uUHJlY2hhdFN1Ym1pdChjYWxsYmFjaz86IGFueSk6IHZvaWQge1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0YXdrUHJlY2hhdFN1Ym1pdCcsIChkYXRhPzogYW55KSA9PiB7XG5cdFx0XHRjYWxsYmFjayhkYXRhLmRldGFpbCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgb25PZmZsaW5lU3VibWl0KGNhbGxiYWNrPzogYW55KTogdm9pZCB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rhd2tPZmZsaW5lU3VibWl0JywgKGRhdGE/OiBhbnkpID0+IHtcblx0XHRcdGNhbGxiYWNrKGRhdGEuZGV0YWlsKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBvbkNoYXRNZXNzYWdlVmlzaXRvcihjYWxsYmFjaz86IGFueSk6IHZvaWQge1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0YXdrQ2hhdE1lc3NhZ2VWaXNpdG9yJywgKG1lc3NhZ2U/OiBhbnkpID0+IHtcblx0XHRcdGNhbGxiYWNrKG1lc3NhZ2UuZGV0YWlsKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBvbkNoYXRNZXNzYWdlQWdlbnQoY2FsbGJhY2s/OiBhbnkpOiB2b2lkIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGF3a0NoYXRNZXNzYWdlQWdlbnQnLCAobWVzc2FnZT86IGFueSkgPT4ge1xuXHRcdFx0Y2FsbGJhY2sobWVzc2FnZS5kZXRhaWwpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIG9uQ2hhdE1lc3NhZ2VTeXN0ZW0oY2FsbGJhY2s/OiBhbnkpOiB2b2lkIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGF3a0NoYXRNZXNzYWdlU3lzdGVtJywgKG1lc3NhZ2U/OiBhbnkpID0+IHtcblx0XHRcdGNhbGxiYWNrKG1lc3NhZ2UuZGV0YWlsKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBvbkFnZW50Sm9pbkNoYXQoY2FsbGJhY2s/OiBhbnkpOiB2b2lkIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGF3a0FnZW50Sm9pbkNoYXQnLCAoZGF0YT86IGFueSkgPT4ge1xuXHRcdFx0Y2FsbGJhY2soZGF0YS5kZXRhaWwpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIG9uQWdlbnRMZWF2ZUNoYXQoY2FsbGJhY2s/OiBhbnkpOiB2b2lkIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGF3a0FnZW50TGVhdmVDaGF0JywgKGRhdGE/OiBhbnkpID0+IHtcblx0XHRcdGNhbGxiYWNrKGRhdGEuZGV0YWlsKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBvbkNoYXRTYXRpc2ZhY3Rpb24oY2FsbGJhY2s/OiBhbnkpOiB2b2lkIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGF3a0NoYXRTYXRpc2ZhY3Rpb24nLCAoc2F0aXNmYWN0aW9uPzogYW55KSA9PiB7XG5cdFx0XHRjYWxsYmFjayhzYXRpc2ZhY3Rpb24uZGV0YWlsKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBvblZpc2l0b3JOYW1lQ2hhbmdlZChjYWxsYmFjaz86IGFueSk6IHZvaWQge1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0YXdrVmlzaXRvck5hbWVDaGFuZ2VkJywgKHZpc2l0b3JOYW1lPzogYW55KSA9PiB7XG5cdFx0XHRjYWxsYmFjayh2aXNpdG9yTmFtZS5kZXRhaWwpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIG9uRmlsZVVwbG9hZChjYWxsYmFjaz86IGFueSk6IHZvaWQge1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0YXdrRmlsZVVwbG9hZCcsIChsaW5rPzogYW55KSA9PiB7XG5cdFx0XHRjYWxsYmFjayhsaW5rLmRldGFpbCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgb25UYWdzVXBkYXRlZChjYWxsYmFjaz86IGFueSk6IHZvaWQge1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0YXdrVGFnc1VwZGF0ZWQnLCAoZGF0YT86IGFueSkgPT4ge1xuXHRcdFx0Y2FsbGJhY2soZGF0YS5kZXRhaWwpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIG9uVW5yZWFkQ291bnRDaGFuZ2VkKGNhbGxiYWNrPzogYW55KTogdm9pZCB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rhd2tVbnJlYWRDb3VudENoYW5nZWQnLCAoZGF0YT86IGFueSkgPT4ge1xuXHRcdFx0Y2FsbGJhY2soZGF0YS5kZXRhaWwpO1xuXHRcdH0pO1xuXHR9XG59XG4iXX0=