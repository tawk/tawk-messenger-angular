import { Inject, Injectable, PLATFORM_ID, Optional } from "@angular/core";
import { DOCUMENT, isPlatformBrowser } from '@angular/common';
import * as i0 from "@angular/core";
export class TawkMessengerAngular {
    constructor(rendererFactory, platformId, document) {
        this.rendererFactory = rendererFactory;
        this.platformId = platformId;
        this.document = document;
        this.renderer = this.rendererFactory.createRenderer(null, null);
    }
    init(data) {
        if (!isPlatformBrowser(this.platformId)) {
            return;
        }
        window.Tawk_API = window.Tawk_API || {};
        window.Tawk_LoadStart = new Date();
        this.loadScript(data);
    }
    loadScript({ basePath = 'tawk.to', propertyId = '', widgetId = '', embedId = '', autoStart = true }) {
        if (!isPlatformBrowser(this.platformId)) {
            return;
        }
        if (embedId && embedId.length) {
            /**
             * If the element with embedId as id we will create a new clement
             */
            if (!document.getElementById(embedId)) {
                const element = this.renderer.createElement('div');
                this.renderer.setProperty(element, 'id', embedId);
                // Append the created div to the body element
                this.renderer.appendChild(document.body, element);
            }
            window.Tawk_API.embedded = embedId;
        }
        if (!autoStart) {
            window.window.Tawk_API.autoStart = autoStart;
        }
        const s1 = this.renderer.createElement('script');
        s1.type = 'text/javascript';
        s1.async = true;
        s1.src = `https://embed.${basePath}/${propertyId}/${widgetId}`;
        s1.charset = 'UTF-8';
        s1.setAttribute('crossorigin', '*');
        this.renderer.appendChild(this.document.head, s1);
    }
    start() {
        window.Tawk_API.start();
    }
    shutdown() {
        window.Tawk_API.shutdown();
    }
    hideWidget() {
        window.Tawk_API.hideWidget();
    }
    showWidget() {
        window.Tawk_API.showWidget();
    }
    maximize() {
        window.Tawk_API.maximize();
    }
    minimize() {
        window.Tawk_API.minimize();
    }
    toggle() {
        window.Tawk_API.toggle();
    }
    popup() {
        window.Tawk_API.popup();
    }
    toggleVisibility() {
        window.Tawk_API.toggleVisibility();
    }
    endChat() {
        window.Tawk_API.endChat();
    }
    getWindowType() {
        return window.Tawk_API.getWindowType();
    }
    getStatus() {
        return window.Tawk_API.getStatus();
    }
    isChatMaximized() {
        return window.Tawk_API.isChatMaximized();
    }
    isChatMinimized() {
        return window.Tawk_API.isChatMinimized();
    }
    isChatHidden() {
        return window.Tawk_API.isChatHidden();
    }
    isChatOngoing() {
        return window.Tawk_API.isChatOngoing();
    }
    isVisitorEngaged() {
        return window.Tawk_API.isVisitorEngaged();
    }
    onLoaded() {
        return window.Tawk_API.onLoaded();
    }
    onBeforeLoaded() {
        return window.Tawk_API.onBeforeLoaded();
    }
    widgetPosition() {
        return window.Tawk_API.widgetPosition();
    }
    visitor(data) {
        return window.Tawk_API.visitor = data;
    }
    setAttributes(attribute, callback) {
        window.Tawk_API.setAttributes(attribute, callback);
    }
    addEvent(event, metadata, callback) {
        window.Tawk_API.setAttributes(event, metadata, callback);
    }
    addTags(tags, callback) {
        window.Tawk_API.addTags(tags, callback);
    }
    removeTags(tags, callback) {
        window.Tawk_API.removeTags(tags, callback);
    }
    switchWidget(data, callback) {
        window.Tawk_API.switchWidget(data, callback);
    }
    customStyle(customStyle) {
        if (customStyle) {
            return window.Tawk_API.customStyle = customStyle;
        }
        return;
    }
    onLoad(callback) {
        window.addEventListener('tawkLoad', () => {
            callback();
        });
    }
    onStatusChange(callback) {
        window.addEventListener('tawkStatusChange', (status) => {
            callback(status.detail);
        });
    }
    onBeforeLoad(callback) {
        window.addEventListener('tawkBeforeLoad', () => {
            callback();
        });
    }
    onChatMaximized(callback) {
        window.addEventListener('tawkChatMaximized', () => {
            callback();
        });
    }
    onChatMinimized(callback) {
        window.addEventListener('tawkChatMinimized', () => {
            callback();
        });
    }
    onChatHidden(callback) {
        window.addEventListener('tawkChatHidden', () => {
            callback();
        });
    }
    onChatStarted(callback) {
        window.addEventListener('tawkChatStarted', () => {
            callback();
        });
    }
    onChatEnded(callback) {
        window.addEventListener('tawkChatEnded', () => {
            callback();
        });
    }
    onPrechatSubmit(callback) {
        window.addEventListener('tawkPrechatSubmit', (data) => {
            callback(data.detail);
        });
    }
    onOfflineSubmit(callback) {
        window.addEventListener('tawkOfflineSubmit', (data) => {
            callback(data.detail);
        });
    }
    onChatMessageVisitor(callback) {
        window.addEventListener('tawkChatMessageVisitor', (message) => {
            callback(message.detail);
        });
    }
    onChatMessageAgent(callback) {
        window.addEventListener('tawkChatMessageAgent', (message) => {
            callback(message.detail);
        });
    }
    onChatMessageSystem(callback) {
        window.addEventListener('tawkChatMessageSystem', (message) => {
            callback(message.detail);
        });
    }
    onAgentJoinChat(callback) {
        window.addEventListener('tawkAgentJoinChat', (data) => {
            callback(data.detail);
        });
    }
    onAgentLeaveChat(callback) {
        window.addEventListener('tawkAgentLeaveChat', (data) => {
            callback(data.detail);
        });
    }
    onChatSatisfaction(callback) {
        window.addEventListener('tawkChatSatisfaction', (satisfaction) => {
            callback(satisfaction.detail);
        });
    }
    onVisitorNameChanged(callback) {
        window.addEventListener('tawkVisitorNameChanged', (visitorName) => {
            callback(visitorName.detail);
        });
    }
    onFileUpload(callback) {
        window.addEventListener('tawkFileUpload', (link) => {
            callback(link.detail);
        });
    }
    onTagsUpdated(callback) {
        window.addEventListener('tawkTagsUpdated', (data) => {
            callback(data.detail);
        });
    }
    onUnreadCountChanged(callback) {
        window.addEventListener('tawkUnreadCountChanged', (data) => {
            callback(data.detail);
        });
    }
}
TawkMessengerAngular.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: TawkMessengerAngular, deps: [{ token: i0.RendererFactory2 }, { token: PLATFORM_ID }, { token: DOCUMENT, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });
TawkMessengerAngular.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: TawkMessengerAngular, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: TawkMessengerAngular, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return [{ type: i0.RendererFactory2 }, { type: Object, decorators: [{
                    type: Inject,
                    args: [PLATFORM_ID]
                }] }, { type: undefined, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [DOCUMENT]
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGF3ay1tZXNzZW5nZXItYW5ndWxhci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL3Rhd2stbWVzc2VuZ2VyLWFuZ3VsYXIvc3JjL2xpYi90YXdrLW1lc3Nlbmdlci1hbmd1bGFyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQW1FLE1BQU0sZUFBZSxDQUFDO0FBQzNJLE9BQU8sRUFBRSxRQUFRLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQzs7QUFLOUQsTUFBTSxPQUFPLG9CQUFvQjtJQUdoQyxZQUNTLGVBQWlDLEVBQ1YsVUFBa0IsRUFDWCxRQUFhO1FBRjNDLG9CQUFlLEdBQWYsZUFBZSxDQUFrQjtRQUNWLGVBQVUsR0FBVixVQUFVLENBQVE7UUFDWCxhQUFRLEdBQVIsUUFBUSxDQUFLO1FBRW5ELElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ2pFLENBQUM7SUFFTSxJQUFJLENBQUMsSUFBVTtRQUNyQixJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQ3hDLE9BQU87U0FDUDtRQUVLLE1BQU8sQ0FBQyxRQUFRLEdBQVMsTUFBTyxDQUFDLFFBQVEsSUFBSSxFQUFFLENBQUM7UUFDaEQsTUFBTyxDQUFDLGNBQWMsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBRTFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdkIsQ0FBQztJQUVPLFVBQVUsQ0FBQyxFQUFFLFFBQVEsR0FBRyxTQUFTLEVBQUUsVUFBVSxHQUFHLEVBQUUsRUFBRSxRQUFRLEdBQUcsRUFBRSxFQUFFLE9BQU8sR0FBRyxFQUFFLEVBQUUsU0FBUyxHQUFHLElBQUksRUFBRTtR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RUFBRTtZQUN4RCxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3ZCLENBQUMsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUVNLGFBQWEsQ0FBQyxRQUFjO1FBQ2xDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLElBQVUsRUFBRSxFQUFFO1lBQ3pELFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdkIsQ0FBQyxDQUFDLENBQUM7SUFDSixDQUFDO0lBRU0sb0JBQW9CLENBQUMsUUFBYztRQUN6QyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsd0JBQXdCLEVBQUUsQ0FBQyxJQUFVLEVBQUUsRUFBRTtZQUNoRSxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3ZCLENBQUMsQ0FBQyxDQUFDO0lBQ0osQ0FBQzs7aUhBOVJXLG9CQUFvQixrREFLdkIsV0FBVyxhQUNDLFFBQVE7cUhBTmpCLG9CQUFvQixjQUZuQixNQUFNOzJGQUVQLG9CQUFvQjtrQkFIaEMsVUFBVTttQkFBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkI7eUZBTTRDLE1BQU07MEJBQWhELE1BQU07MkJBQUMsV0FBVzs7MEJBQ2xCLFFBQVE7OzBCQUFJLE1BQU07MkJBQUMsUUFBUSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgUExBVEZPUk1fSUQsIE9wdGlvbmFsLCBSZW5kZXJlcjIsIFJlbmRlcmVyRmFjdG9yeTIsIE91dHB1dCwgSG9zdExpc3RlbmVyLCBFdmVudEVtaXR0ZXIgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgRE9DVU1FTlQsIGlzUGxhdGZvcm1Ccm93c2VyIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgVGF3a01lc3NlbmdlckFuZ3VsYXIge1xuXHRwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjJcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIHJlbmRlcmVyRmFjdG9yeTogUmVuZGVyZXJGYWN0b3J5Mixcblx0XHRASW5qZWN0KFBMQVRGT1JNX0lEKSBwcm90ZWN0ZWQgcGxhdGZvcm1JZDogT2JqZWN0LFxuXHRcdEBPcHRpb25hbCgpIEBJbmplY3QoRE9DVU1FTlQpIHByaXZhdGUgZG9jdW1lbnQ6IGFueVxuXHQpIHtcblx0XHR0aGlzLnJlbmRlcmVyID0gdGhpcy5yZW5kZXJlckZhY3RvcnkuY3JlYXRlUmVuZGVyZXIobnVsbCwgbnVsbCk7XG5cdH1cblxuXHRwdWJsaWMgaW5pdChkYXRhIDogYW55KSA6IHZvaWQge1xuXHRcdGlmICghaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5wbGF0Zm9ybUlkKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdCg8YW55PndpbmRvdykuVGF3a19BUEkgPSAoPGFueT53aW5kb3cpLlRhd2tfQVBJIHx8IHt9O1xuXHRcdCg8YW55PndpbmRvdykuVGF3a19Mb2FkU3RhcnQgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0dGhpcy5sb2FkU2NyaXB0KGRhdGEpO1xuXHR9XG5cblx0cHJpdmF0ZSBsb2FkU2NyaXB0KHsgYmFzZVBhdGggPSAndGF3ay50bycsIHByb3BlcnR5SWQgPSAnJywgd2lkZ2V0SWQgPSAnJywgZW1iZWRJZCA9ICcnLCBhdXRvU3RhcnQgPSB0cnVlIH0pOiB2b2lkIHtcblx0XHRpZiAoIWlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm1JZCkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoZW1iZWRJZCAmJiBlbWJlZElkLmxlbmd0aCkge1xuXHRcdFx0LyoqXG5cdFx0XHQgKiBJZiB0aGUgZWxlbWVudCB3aXRoIGVtYmVkSWQgYXMgaWQgd2Ugd2lsbCBjcmVhdGUgYSBuZXcgY2xlbWVudFxuXHRcdFx0ICovXG5cdFx0XHRpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVtYmVkSWQpKSB7XG5cdFx0XHRcdGNvbnN0IGVsZW1lbnQgPSB0aGlzLnJlbmRlcmVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG5cdFx0XHRcdHRoaXMucmVuZGVyZXIuc2V0UHJvcGVydHkoZWxlbWVudCwgJ2lkJywgZW1iZWRJZCk7XG5cblx0XHRcdFx0Ly8gQXBwZW5kIHRoZSBjcmVhdGVkIGRpdiB0byB0aGUgYm9keSBlbGVtZW50XG5cdFx0XHRcdHRoaXMucmVuZGVyZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuYm9keSwgZWxlbWVudCk7XG5cdFx0XHR9XG5cblx0XHRcdCg8YW55PndpbmRvdykuVGF3a19BUEkuZW1iZWRkZWQgPSBlbWJlZElkO1xuXHRcdH1cblxuXHRcdGlmICghYXV0b1N0YXJ0KSB7XG5cdFx0XHQoPGFueT53aW5kb3cpLndpbmRvdy5UYXdrX0FQSS5hdXRvU3RhcnQgPSBhdXRvU3RhcnQ7XG5cdFx0fVxuXG5cdFx0Y29uc3QgczEgPSB0aGlzLnJlbmRlcmVyLmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXHRcdHMxLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0J1xuXHRcdHMxLmFzeW5jID0gdHJ1ZTtcblx0XHRzMS5zcmMgPSBgaHR0cHM6Ly9lbWJlZC4ke2Jhc2VQYXRofS8ke3Byb3BlcnR5SWR9LyR7d2lkZ2V0SWR9YDtcblx0XHRzMS5jaGFyc2V0ID0gJ1VURi04Jztcblx0XHRzMS5zZXRBdHRyaWJ1dGUoJ2Nyb3Nzb3JpZ2luJywgJyonKTtcblx0XHR0aGlzLnJlbmRlcmVyLmFwcGVuZENoaWxkKHRoaXMuZG9jdW1lbnQuaGVhZCwgczEpO1xuXHR9XG5cblx0cHVibGljIHN0YXJ0KCk6IHZvaWQge1xuXHRcdCg8YW55PndpbmRvdykuVGF3a19BUEkuc3RhcnQoKTtcblx0fVxuXG5cdHB1YmxpYyBzaHV0ZG93bigpOiB2b2lkIHtcblx0XHQoPGFueT53aW5kb3cpLlRhd2tfQVBJLnNodXRkb3duKCk7XG5cdH1cblxuXHRwdWJsaWMgaGlkZVdpZGdldCgpOiB2b2lkIHtcblx0XHQoPGFueT53aW5kb3cpLlRhd2tfQVBJLmhpZGVXaWRnZXQoKTtcblx0fVxuXG5cdHB1YmxpYyBzaG93V2lkZ2V0KCk6IHZvaWQge1xuXHRcdCg8YW55PndpbmRvdykuVGF3a19BUEkuc2hvd1dpZGdldCgpO1xuXHR9XG5cblx0cHVibGljIG1heGltaXplKCk6IHZvaWQge1xuXHRcdCg8YW55PndpbmRvdykuVGF3a19BUEkubWF4aW1pemUoKTtcblx0fVxuXG5cdHB1YmxpYyBtaW5pbWl6ZSgpOiB2b2lkIHtcblx0XHQoPGFueT53aW5kb3cpLlRhd2tfQVBJLm1pbmltaXplKCk7XG5cdH1cblxuXHRwdWJsaWMgdG9nZ2xlKCk6IHZvaWQge1xuXHRcdCg8YW55PndpbmRvdykuVGF3a19BUEkudG9nZ2xlKCk7XG5cdH1cblxuXHRwdWJsaWMgcG9wdXAoKTogdm9pZCB7XG5cdFx0KDxhbnk+d2luZG93KS5UYXdrX0FQSS5wb3B1cCgpO1xuXHR9XG5cblx0cHVibGljIHRvZ2dsZVZpc2liaWxpdHkoKTogdm9pZCB7XG5cdFx0KDxhbnk+d2luZG93KS5UYXdrX0FQSS50b2dnbGVWaXNpYmlsaXR5KCk7XG5cdH1cblxuXHRwdWJsaWMgZW5kQ2hhdCgpOiB2b2lkIHtcblx0XHQoPGFueT53aW5kb3cpLlRhd2tfQVBJLmVuZENoYXQoKTtcblx0fVxuXG5cdHB1YmxpYyBnZXRXaW5kb3dUeXBlKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuICg8YW55PndpbmRvdykuVGF3a19BUEkuZ2V0V2luZG93VHlwZSgpO1xuXHR9XG5cblx0cHVibGljIGdldFN0YXR1cygpOiBzdHJpbmcge1xuXHRcdHJldHVybiAoPGFueT53aW5kb3cpLlRhd2tfQVBJLmdldFN0YXR1cygpO1xuXHR9XG5cblx0cHVibGljIGlzQ2hhdE1heGltaXplZCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKDxhbnk+d2luZG93KS5UYXdrX0FQSS5pc0NoYXRNYXhpbWl6ZWQoKTtcblx0fVxuXG5cdHB1YmxpYyBpc0NoYXRNaW5pbWl6ZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuICg8YW55PndpbmRvdykuVGF3a19BUEkuaXNDaGF0TWluaW1pemVkKCk7XG5cdH1cblxuXHRwdWJsaWMgaXNDaGF0SGlkZGVuKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAoPGFueT53aW5kb3cpLlRhd2tfQVBJLmlzQ2hhdEhpZGRlbigpO1xuXHR9XG5cblx0cHVibGljIGlzQ2hhdE9uZ29pbmcoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuICg8YW55PndpbmRvdykuVGF3a19BUEkuaXNDaGF0T25nb2luZygpO1xuXHR9XG5cblx0cHVibGljIGlzVmlzaXRvckVuZ2FnZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuICg8YW55PndpbmRvdykuVGF3a19BUEkuaXNWaXNpdG9yRW5nYWdlZCgpO1xuXHR9XG5cblx0cHVibGljIG9uTG9hZGVkKCk6IHZvaWQge1xuXHRcdHJldHVybiAoPGFueT53aW5kb3cpLlRhd2tfQVBJLm9uTG9hZGVkKCk7XG5cdH1cblxuXHRwdWJsaWMgb25CZWZvcmVMb2FkZWQoKTogdm9pZCB7XG5cdFx0cmV0dXJuICg8YW55PndpbmRvdykuVGF3a19BUEkub25CZWZvcmVMb2FkZWQoKTtcblx0fVxuXG5cdHB1YmxpYyB3aWRnZXRQb3NpdGlvbigpOiB2b2lkIHtcblx0XHRyZXR1cm4gKDxhbnk+d2luZG93KS5UYXdrX0FQSS53aWRnZXRQb3NpdGlvbigpO1xuXHR9XG5cblx0cHVibGljIHZpc2l0b3IoZGF0YTogYW55KSB7XG5cdFx0cmV0dXJuICg8YW55PndpbmRvdykuVGF3a19BUEkudmlzaXRvciA9IGRhdGE7XG5cdH1cblxuXHRwdWJsaWMgc2V0QXR0cmlidXRlcyhhdHRyaWJ1dGU6IG9iamVjdCwgY2FsbGJhY2s6IChlcnJvcj86IHN0cmluZyB8IG51bGwpID0+IHZvaWQpIHtcblx0XHQoPGFueT53aW5kb3cpLlRhd2tfQVBJLnNldEF0dHJpYnV0ZXMoYXR0cmlidXRlLCBjYWxsYmFjayk7XG5cdH1cblxuXHRwdWJsaWMgYWRkRXZlbnQoZXZlbnQ6IHN0cmluZ1tdLCBtZXRhZGF0YTogYW55LCBjYWxsYmFjazogKGVycm9yPzogYW55IHwgbnVsbCkgPT4gdm9pZCkge1xuXHRcdCg8YW55PndpbmRvdykuVGF3a19BUEkuc2V0QXR0cmlidXRlcyhldmVudCwgbWV0YWRhdGEsIGNhbGxiYWNrKTtcblx0fVxuXG5cdHB1YmxpYyBhZGRUYWdzKHRhZ3M6IHN0cmluZ1tdLCBjYWxsYmFjazogKGVycm9yPzogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZCkge1xuXHRcdCg8YW55PndpbmRvdykuVGF3a19BUEkuYWRkVGFncyh0YWdzLCBjYWxsYmFjayk7XG5cdH1cblxuXHRwdWJsaWMgcmVtb3ZlVGFncyh0YWdzOiBzdHJpbmdbXSwgY2FsbGJhY2s6IChlcnJvcj86IHN0cmluZyB8IG51bGwpID0+IHZvaWQpIHtcblx0XHQoPGFueT53aW5kb3cpLlRhd2tfQVBJLnJlbW92ZVRhZ3ModGFncywgY2FsbGJhY2spO1xuXHR9XG5cblx0cHVibGljIHN3aXRjaFdpZGdldChkYXRhOiBvYmplY3QsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKSB7XG5cdFx0KDxhbnk+d2luZG93KS5UYXdrX0FQSS5zd2l0Y2hXaWRnZXQoZGF0YSwgY2FsbGJhY2spO1xuXHR9XG5cblx0cHVibGljIGN1c3RvbVN0eWxlKGN1c3RvbVN0eWxlPzogb2JqZWN0IHwgdW5kZWZpbmVkKSB7XG5cdFx0aWYgKGN1c3RvbVN0eWxlKSB7XG5cdFx0XHRyZXR1cm4gKDxhbnk+d2luZG93KS5UYXdrX0FQSS5jdXN0b21TdHlsZSA9IGN1c3RvbVN0eWxlO1xuXHRcdH1cblxuXHRcdHJldHVybjtcblx0fVxuXG5cdHB1YmxpYyBvbkxvYWQoY2FsbGJhY2s/OiBhbnkpOiB2b2lkIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGF3a0xvYWQnLCAoKSA9PiB7XG5cdFx0XHRjYWxsYmFjaygpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIG9uU3RhdHVzQ2hhbmdlKGNhbGxiYWNrPzogYW55KTogdm9pZCB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rhd2tTdGF0dXNDaGFuZ2UnLCAoc3RhdHVzPzogYW55KSA9PiB7XG5cdFx0XHRjYWxsYmFjayhzdGF0dXMuZGV0YWlsKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBvbkJlZm9yZUxvYWQoY2FsbGJhY2s/OiBhbnkpOiB2b2lkIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGF3a0JlZm9yZUxvYWQnLCAoKSA9PiB7XG5cdFx0XHRjYWxsYmFjaygpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIG9uQ2hhdE1heGltaXplZChjYWxsYmFjaz86IGFueSk6IHZvaWQge1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0YXdrQ2hhdE1heGltaXplZCcsICgpID0+IHtcblx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgb25DaGF0TWluaW1pemVkKGNhbGxiYWNrPzogYW55KTogdm9pZCB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rhd2tDaGF0TWluaW1pemVkJywgKCkgPT4ge1xuXHRcdFx0Y2FsbGJhY2soKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBvbkNoYXRIaWRkZW4oY2FsbGJhY2s/OiBhbnkpOiB2b2lkIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGF3a0NoYXRIaWRkZW4nLCAoKSA9PiB7XG5cdFx0XHRjYWxsYmFjaygpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIG9uQ2hhdFN0YXJ0ZWQoY2FsbGJhY2s/OiBhbnkpOiB2b2lkIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGF3a0NoYXRTdGFydGVkJywgKCkgPT4ge1xuXHRcdFx0Y2FsbGJhY2soKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBvbkNoYXRFbmRlZChjYWxsYmFjaz86IGFueSk6IHZvaWQge1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0YXdrQ2hhdEVuZGVkJywgKCkgPT4ge1xuXHRcdFx0Y2FsbGJhY2soKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBvblByZWNoYXRTdWJtaXQoY2FsbGJhY2s/OiBhbnkpOiB2b2lkIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGF3a1ByZWNoYXRTdWJtaXQnLCAoZGF0YT86IGFueSkgPT4ge1xuXHRcdFx0Y2FsbGJhY2soZGF0YS5kZXRhaWwpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIG9uT2ZmbGluZVN1Ym1pdChjYWxsYmFjaz86IGFueSk6IHZvaWQge1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0YXdrT2ZmbGluZVN1Ym1pdCcsIChkYXRhPzogYW55KSA9PiB7XG5cdFx0XHRjYWxsYmFjayhkYXRhLmRldGFpbCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgb25DaGF0TWVzc2FnZVZpc2l0b3IoY2FsbGJhY2s/OiBhbnkpOiB2b2lkIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGF3a0NoYXRNZXNzYWdlVmlzaXRvcicsIChtZXNzYWdlPzogYW55KSA9PiB7XG5cdFx0XHRjYWxsYmFjayhtZXNzYWdlLmRldGFpbCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgb25DaGF0TWVzc2FnZUFnZW50KGNhbGxiYWNrPzogYW55KTogdm9pZCB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rhd2tDaGF0TWVzc2FnZUFnZW50JywgKG1lc3NhZ2U/OiBhbnkpID0+IHtcblx0XHRcdGNhbGxiYWNrKG1lc3NhZ2UuZGV0YWlsKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBvbkNoYXRNZXNzYWdlU3lzdGVtKGNhbGxiYWNrPzogYW55KTogdm9pZCB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rhd2tDaGF0TWVzc2FnZVN5c3RlbScsIChtZXNzYWdlPzogYW55KSA9PiB7XG5cdFx0XHRjYWxsYmFjayhtZXNzYWdlLmRldGFpbCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgb25BZ2VudEpvaW5DaGF0KGNhbGxiYWNrPzogYW55KTogdm9pZCB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rhd2tBZ2VudEpvaW5DaGF0JywgKGRhdGE/OiBhbnkpID0+IHtcblx0XHRcdGNhbGxiYWNrKGRhdGEuZGV0YWlsKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBvbkFnZW50TGVhdmVDaGF0KGNhbGxiYWNrPzogYW55KTogdm9pZCB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rhd2tBZ2VudExlYXZlQ2hhdCcsIChkYXRhPzogYW55KSA9PiB7XG5cdFx0XHRjYWxsYmFjayhkYXRhLmRldGFpbCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgb25DaGF0U2F0aXNmYWN0aW9uKGNhbGxiYWNrPzogYW55KTogdm9pZCB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rhd2tDaGF0U2F0aXNmYWN0aW9uJywgKHNhdGlzZmFjdGlvbj86IGFueSkgPT4ge1xuXHRcdFx0Y2FsbGJhY2soc2F0aXNmYWN0aW9uLmRldGFpbCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgb25WaXNpdG9yTmFtZUNoYW5nZWQoY2FsbGJhY2s/OiBhbnkpOiB2b2lkIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGF3a1Zpc2l0b3JOYW1lQ2hhbmdlZCcsICh2aXNpdG9yTmFtZT86IGFueSkgPT4ge1xuXHRcdFx0Y2FsbGJhY2sodmlzaXRvck5hbWUuZGV0YWlsKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBvbkZpbGVVcGxvYWQoY2FsbGJhY2s/OiBhbnkpOiB2b2lkIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGF3a0ZpbGVVcGxvYWQnLCAobGluaz86IGFueSkgPT4ge1xuXHRcdFx0Y2FsbGJhY2sobGluay5kZXRhaWwpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIG9uVGFnc1VwZGF0ZWQoY2FsbGJhY2s/OiBhbnkpOiB2b2lkIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGF3a1RhZ3NVcGRhdGVkJywgKGRhdGE/OiBhbnkpID0+IHtcblx0XHRcdGNhbGxiYWNrKGRhdGEuZGV0YWlsKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBvblVucmVhZENvdW50Q2hhbmdlZChjYWxsYmFjaz86IGFueSk6IHZvaWQge1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0YXdrVW5yZWFkQ291bnRDaGFuZ2VkJywgKGRhdGE/OiBhbnkpID0+IHtcblx0XHRcdGNhbGxiYWNrKGRhdGEuZGV0YWlsKTtcblx0XHR9KTtcblx0fVxufVxuIl19